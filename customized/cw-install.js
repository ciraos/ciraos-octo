navigator.serviceWorker?("true"!==localStorage.getItem("cw_installed")&&window.stop(),navigator.serviceWorker.register("/cw.js?t="+(new Date).getTime()).then((async e=>{"true"!==localStorage.getItem("cw_installed")&&setInterval((()=>{fetch("/cw-cgi/api?type=config").then((e=>e.text())).then((e=>{"ok"===e&&(localStorage.setItem("cw_installed","true"),console.log("[CW] Installation is completed.Reloading..."),location.reload())})).catch((e=>{console.warn("[CW] Installation may not be complete, try again later.")}))}),100)})).catch((e=>{console.error("[CW] Installing Failed,Error: "+e.message)}))):console.error("[CW] Installing Failed,Error: Browser not support service worker");