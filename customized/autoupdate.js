(async(e,t)=>{const a=e=>localStorage.getItem(e),i=(e,t)=>{localStorage.setItem(e,t)};async function o(){navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then((async e=>{for(let t of e)await t.unregister();console.log("Unregistered service workers")})).then((()=>{navigator.serviceWorker.register("/cw.js").then((async e=>{console.log("Registered service worker"),await e.update(),i("cw_time_sw",(new Date).getTime())}))}))}async function n(){await fetch("https://ciraos-octo.vercel.app/cw-cgi/api?type=config").then((e=>e.text())).then((e=>{"ok"===e?(console.log("Config updated"),i("cw_time_config",(new Date).getTime())):console.log("Config update failed")}))}Number(a("cw_time_sw"))<(new Date).getTime()-e&&(await o(),await n()),Number(a("cw_time_config"))<(new Date).getTime()-6e4&&await n(),setInterval((async()=>{await o(),await n()}),e),setInterval((async()=>{await n()}),6e4)})(432e5);